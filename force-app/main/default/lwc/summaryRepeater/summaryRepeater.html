<template>
  <lightning-card title="Summary Builder">
    <template for:each={rows} for:item="row" for:index="index">
      <div key={row.id} class="slds-grid slds-gutters slds-m-around_x-small">
        <div class="slds-col">
          <lightning-combobox
            name="SField"
            label="Field"
            data-index={index}
            options={fieldsListWithDetail}
            onchange={handleChange}
            value={row.SField}
          >
          </lightning-combobox>
        </div>
        <div class="slds-col">
          <lightning-combobox
            name="operation"
            label="Operation"
            data-index={index}
            options={summaryTypeOptions}
            onchange={handleChange}
            value={row.operation}
          >
          </lightning-combobox>
        </div>
        <div class="slds-col">
          <lightning-input
            name="Coulmn_Name"
            label="Column Name"
            data-index={index}
            value={row.Coulmn_Name}
            onchange={handleChange}
          >
          </lightning-input>
        </div>
      </div>
    </template>
    <div class="slds-m-around_medium">
      <lightning-button label="Add Row" onclick={addRow}></lightning-button>
      <lightning-button
        label="Remove Row"
        onclick={removeRow}
        class="slds-m-left_small"
      ></lightning-button>
    </div>
  </lightning-card>

  <!-- for validation -->
    <!-- New Validation Builder -->
  <lightning-card title="Validation Builder (Number Fields)">
    <template for:each={validatioFields} for:item="valRow" for:index="vIndex">
      <div key={valRow.id} class="slds-grid slds-gutters slds-m-around_x-small">
        <!-- Field Selection -->
        <div class="slds-col">
          <lightning-combobox
            name="SField"
            label="Field"
            data-index={vIndex}
            options={fieldsListWithDetail}
            onchange={handleValidationChange}
            value={valRow.SField}
          ></lightning-combobox>
        </div>
        <!-- Operator -->
        <div class="slds-col">
          <lightning-combobox
            name="operation"
            label="Operator"
            data-index={vIndex}
            options={validationTypeOperaters}
            onchange={handleValidationChange}
            value={valRow.operation}
          ></lightning-combobox>
        </div>
        <!-- Value -->
        <div class="slds-col">
          <lightning-input
            type="number"
            name="value"
            label="Value"
            data-index={vIndex}
            value={valRow.value}
            onchange={handleValidationChange}
          ></lightning-input>
        </div>
      </div>
    </template>

    <div class="slds-m-around_medium">
      <lightning-button label="Add Validation" onclick={addValidationRow}></lightning-button>
      <lightning-button
        label="Remove Validation"
        onclick={removeValidationRow}
        class="slds-m-left_small"
      ></lightning-button>
    </div>
  </lightning-card>
</template>
